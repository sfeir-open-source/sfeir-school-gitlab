##==##

<!-- .slide: class="first-slide"  sfeir-level="1"  sfeir-techno="" -->

# Module 5 : Intégration, déploiement, livraison

# SFEIR Institute

![](./assets/images/p1_i47.png)

Notes:
Version 1

##==##

<!-- .slide:-->

# Rappels autour du CI / CD

![](./assets/images/p2_i56.png)

##==##

<!-- .slide:-->

# Rappels autour du CI / CD

Source : Practices of Continuous Integration

![](./assets/images/p3_i63.png)

##==##

<!-- .slide:-->

# Rappels autour du CI /CD

Continuous Integration pourquoi ?
Accélérer la boucle de feedback
S'assurer de répondre aux exigences :
Pas de bug connu
Qualité du code
Niveau de performance
Niveau de sécurité
Réduire le nombre d'erreurs humaines
Aider les nouveaux venues à s'intégrer
...

##==##

<!-- .slide:-->

# Rappels autour du CI /CD

Continuous Integration pourquoi ?
Accélérer la boucle de feedback
S'assurer de répondre aux exigences :
Pas de bug connu
Qualité du code
Niveau de performance
Niveau de sécurité
Réduire le nombre d'erreurs humaines
Aider les nouveaux venues à s'intégrer
...

##==##

<!-- .slide:-->

# Rappels autour du CI /CD

Continuous Integration pourquoi ?
Accélérer la boucle de feedback
S'assurer de répondre aux exigences :
Pas de bug connu
Qualité du code
Niveau de performance
Niveau de sécurité
Réduire le nombre d'erreurs humaines
Aider les nouveaux venues à s'intégrer
...

##==##

<!-- .slide:-->

# Rappels autour du CI /CD

Continuous Integration pourquoi ?
Accélérer la boucle de feedback
S'assurer de répondre aux exigences :
Pas de bug connu
Qualité du code
Niveau de performance
Niveau de sécurité
Réduire le nombre d'erreurs humaines
Aider les nouveaux venues à s'intégrer
...

##==##

<!-- .slide:-->

# Rappels autour du CI /CD

Continuous Integration pourquoi ?
Accélérer la boucle de feedback
S'assurer de répondre aux exigences :
Pas de bug connu
Qualité du code
Niveau de performance
Niveau de sécurité
Réduire le nombre d'erreurs humaines
Aider les nouveaux venues à s'intégrer
...

##==##

<!-- .slide:-->

# Rappels autour du CI /CD

Continuous Integration pourquoi ?
Accélérer la boucle de feedback
S'assurer de répondre aux exigences :
Pas de bug connu
Qualité du code
Niveau de performance
Niveau de sécurité
Réduire le nombre d'erreurs humaines
Aider les nouveaux venues à s'intégrer
...

##==##

<!-- .slide:-->

# Rappels autour du CI /CD

Continuous Integration pourquoi ?
Accélérer la boucle de feedback
S'assurer de répondre aux exigences :
Pas de bug connu
Qualité du code
Niveau de performance
Niveau de sécurité
Réduire le nombre d'erreurs humaines
Aider les nouveaux venues à s'intégrer
...

##==##

<!-- .slide:-->

# Dans nos projets

![](./assets/images/p11_i168.png)

![](./assets/images/p11_i169.png)

![](./assets/images/p11_i170.png)

![](./assets/images/p11_i171.png)

![](./assets/images/p11_i172.png)

![](./assets/images/p11_i173.png)

![](./assets/images/p11_i174.png)

##==##

<!-- .slide:-->

# Rappels autour du CI / CD

Inventaire :
Le code source dans un SCM
Une solution d'intégration continue:
Valider chaque contribution
Générer les artefacts
Une solution de stockage pour les artefacts
Cloud ou solution de provisioning d'infrastructure

![](./assets/images/p12_i181.png)

##==##

<!-- .slide:-->

# Rappels autour du CI / CD

Inventaire :
Le code source dans un SCM
Une solution d'intégration continue:
Valider chaque contribution
Générer les artefacts
Une solution de stockage pour les artefacts
Cloud ou solution de provisioning d'infrastructure

![](./assets/images/p13_i188.png)

![](./assets/images/p13_i189.png)

##==##

<!-- .slide:-->

# Rappels autour du CI / CD

Inventaire :
Le code source dans un SCM
Une solution d'intégration continue:
Valider chaque contribution
Générer les artefacts
Une solution de stockage pour les artefacts
Cloud ou solution de provisioning d'infrastructure

![](./assets/images/p14_i197.png)

![](./assets/images/p14_i198.png)

##==##

<!-- .slide:-->

# Rappels autour du CI / CD

Inventaire :
Le code source dans un SCM
Une solution d'intégration continue:
Valider chaque contribution
Générer les artefacts
Une solution de stockage pour les artefacts
Cloud ou solution de provisioning d'infrastructure

![](./assets/images/p15_i207.png)

![](./assets/images/p15_i208.png)

##==##

<!-- .slide:-->

# Rappels autour du CI / CD

Inventaire :
Le code source dans un SCM
Une solution d'intégration continue:
Valider chaque contribution
Générer les artefacts
Une solution de stockage pour les artefacts
Cloud ou solution de provisioning d'infrastructure

![](./assets/images/p16_i217.png)

![](./assets/images/p16_i218.png)

![](./assets/images/p16_i219.png)

##==##

<!-- .slide:-->

# Rappels autour du CI / CD

Inventaire :
Le code source dans un SCM
Une solution d'intégration continue:
Valider chaque contribution
Générer les artefacts
Une solution de stockage pour les artefacts
Cloud ou solution de provisioning d'infrastructure

![](./assets/images/p17_i229.png)

![](./assets/images/p17_i230.png)

![](./assets/images/p17_i231.png)

![](./assets/images/p17_i232.png)

##==##

<!-- .slide:-->

# Rappels autour du CI / CD

Et GitLab ?

![](./assets/images/p18_i243.png)

##==##

<!-- .slide:-->

# Rappels autour du CI / CD

Et GitLab ?

OK

![](./assets/images/p19_i250.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD

Créer son premier pipeline

# Lab 1 - Module 5

##==##

<!-- .slide:-->

Runner

Executor

![](./assets/images/p21_i262.png)

![](./assets/images/p21_i264.png)

![](./assets/images/p21_i266.png)

![](./assets/images/p21_i271.png)

![](./assets/images/p21_i272.png)

![](./assets/images/p21_i273.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD : Runner

Permet de lancer l'exécution d'un job
Managed ou Self-managed (application go)
Shared / Group / Specific
Des tags pour choisir son runner

Runner

Executor

![](./assets/images/p22_i285.png)

![](./assets/images/p22_i287.png)

![](./assets/images/p22_i289.png)

![](./assets/images/p22_i290.png)

![](./assets/images/p22_i291.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD : Runner

Permet de lancer l'exécution d'un job
Managed ou Self-managed (application go)
Shared / Group / Specific
Des tags pour choisir son runner

Runner

![](./assets/images/p23_i304.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD : Runner

Permet de lancer l'exécution d'un job
Managed ou Self-managed (application go)
Shared / Group / Specific
Des tags pour choisir son runner

Runner

![](./assets/images/p24_i313.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD : Runner

Permet de lancer l'exécution d'un job
Managed ou Self-managed (application go)
Shared / Group / Specific
Des tags pour choisir son runner

Doc : GitLab Runner | GitLab

Runner

![](./assets/images/p25_i322.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD : Executor

L'environnement d'exécution
Différent types (ex : ssh, docker, docker machine, kubernetes ...)

Doc : Executors | GitLab

Runner

Executor

![](./assets/images/p26_i331.png)

![](./assets/images/p26_i334.png)

![](./assets/images/p26_i335.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD : Executor

L'environnement d'exécution
Différents types (ex : ssh, docker, docker machine, kubernetes ...)

Doc : Executors | GitLab

Runner

Executor

![](./assets/images/p27_i344.png)

![](./assets/images/p27_i347.png)

![](./assets/images/p27_i348.png)

##==##

<!-- .slide:-->

# Gitlab CI /CD : managed shared runners

Linux environment
Docker Machine executor
Autoscale GCP instances
n1-standard-1 instances
Image par défaut : Ruby

doc : GitLab.com settings | GitLab

![](./assets/images/p28_i356.png)

##==##

<!-- .slide:-->

# Gitlab CI /CD : managed shared runners

Linux environment
Docker Machine executor
Autoscale GCP instances
n1-standard-1 instances
Image par défaut : Ruby

doc : GitLab.com settings | GitLab

![](./assets/images/p29_i363.png)

##==##

<!-- .slide:-->

# Gitlab CI /CD : managed shared runners

Linux environment
Docker Machine executor
Autoscale GCP instances
n1-standard-1 instances
Image par défaut : Ruby

doc : GitLab.com settings | GitLab

![](./assets/images/p30_i370.png)

##==##

<!-- .slide:-->

# Gitlab CI /CD : managed shared runners

Linux environment
Docker Machine executor
Autoscale GCP instances
n1-standard-1 instances
Image par défaut : Ruby

doc : GitLab.com settings | GitLab

1 vCPU

3.75 Go

25 Go

![](./assets/images/p31_i377.png)

![](./assets/images/p31_i378.png)

![](./assets/images/p31_i379.png)

##==##

<!-- .slide:-->

# Gitlab CI /CD : managed shared runners

Linux environment
Docker Machine executor
Autoscale GCP instances
n1-standard-1 instances
Image par défaut : Ruby

doc : GitLab.com settings | GitLab

![](./assets/images/p32_i389.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD

Modification du fichier .gitlab-ci.yml

Les executors

# Lab 2 - Module 5

##==##

<!-- .slide:-->

# GitLab CI / CD : Jobs

Exécutent des commandes sur un exécuteur
Peuvent s'exécuter en parallèle
statut du job = statut de la commande

![](./assets/images/p34_i402.png)

##==##

<!-- .slide:-->

# GitLab CI / CD : Jobs

Exécutent des commandes sur un exécuteur
Peuvent s'exécuter en parallèle
statut du job = statut de la commande

![](./assets/images/p35_i409.png)

##==##

<!-- .slide:-->

# GitLab CI / CD : Jobs

Exécutent des commandes sur un exécuteur
Peuvent s'exécuter en parallèle
statut du job = statut de la commande

![](./assets/images/p36_i416.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD : Stages

Permet de séquencer le build
Peut contenir plusieurs jobs
Un stage en erreur stop le build

![](./assets/images/p37_i423.png)

![](./assets/images/p37_i424.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD : Stages

Permet de séquencer le build
Peut contenir plusieurs jobs
Un stage en erreur stop le build

![](./assets/images/p38_i432.png)

![](./assets/images/p38_i433.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD : Stages

Permet de séquencer le build
Peut contenir plusieurs jobs
Un stage en erreur stop le build

![](./assets/images/p39_i446.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD : Job options

Execution  
 image / script / stage
tags
environment / variables / secrets
cache / artifacts
Spécificités du flow d'exécution
when
retry
timeout / interruptible  
 parallel
Specificités workflow
Rules / only / except

Source : Keyword reference for the .gitlab-ci.yml file | GitLab

##==##

<!-- .slide:-->

# Gitlab CI / CD : Job options

Execution  
 image / script / stage
tags
environment / variables / secrets
cache / artifacts
Spécificités du flow d'exécution
when
retry
timeout / interruptible  
 parallel
Specificités workflow
Rules / only / except

Source : Keyword reference for the .gitlab-ci.yml file | GitLab

##==##

<!-- .slide:-->

# Gitlab CI / CD : Job options

Execution  
 image / script / stage
tags
environment / variables / secrets
cache / artifacts
Spécificités du flow d'exécution
when
retry
timeout / interruptible  
 parallel
Specificités workflow
Rules / only / except

Source : Keyword reference for the .gitlab-ci.yml file | GitLab

##==##

<!-- .slide:-->

# Gitlab CI / CD : Job options

Execution  
 image / script / stage
tags
environment / variables / secrets
cache / artifacts
Spécificités du flow d'exécution
when
retry
timeout / interruptible  
 parallel
Specificités workflow
Rules / only / except

Source : Keyword reference for the .gitlab-ci.yml file | GitLab

##==##

<!-- .slide:-->

# Gitlab CI / CD : Job options

Execution  
 image / script / stage
tags
environment / variables / secrets
cache / artifacts
Spécificités du flow d'exécution
when
retry
timeout / interruptible  
 parallel
Specificités workflow
Rules / only / except

Source : Keyword reference for the .gitlab-ci.yml file | GitLab

![](./assets/images/p44_i477.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD : Job options

Execution  
 image / script / stage
tags
environment / variables / secrets
cache / artifacts
Spécificités du flow d'exécution
when
retry
timeout / interruptible  
 parallel
Specificités workflow
Rules / only / except

Source : Keyword reference for the .gitlab-ci.yml file | GitLab

![](./assets/images/p45_i484.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD : Job options

Execution  
 image / script / stage
tags
environment / variables / secrets
cache / artifacts
Spécificités du flow d'exécution
when
retry
timeout / interruptible  
 parallel
Specificités workflow
Rules / only / except

Source : Keyword reference for the .gitlab-ci.yml file | GitLab

##==##

<!-- .slide:-->

# Gitlab CI / CD : Job options

Execution  
 image / script / stage
tags
environment / variables / secrets
cache / artifacts
Spécificités du flow d'exécution
when
retry
timeout / interruptible  
 parallel
Specificités workflow
Rules / only / except

Source : Keyword reference for the .gitlab-ci.yml file | GitLab

![](./assets/images/p47_i497.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD : Job options

Execution  
 image / script / stage
tags
environment / variables / secrets
cache / artifacts
Spécificités du flow d'exécution
when
retry
timeout / interruptible  
 parallel
Specificités workflow
Rules / only / except

Source : Keyword reference for the .gitlab-ci.yml file | GitLab

##==##

<!-- .slide:-->

# Gitlab CI / CD

Controller le flow d'execution

Optimiser les performance de build

Implémenter le workflow de développement

# Lab 3 - Module 5

##==##

<!-- .slide:-->

# Gitlab CI / CD : Workflows

Permet de décider quand le pipeline est créé
Permet de modifier les variables selon le déclencheur
attention

Doc: Keyword reference for the .gitlab-ci.yml file | GitLab

##==##

<!-- .slide:-->

# Gitlab CI / CD : Workflows

Permet de décider quand le pipeline est créé
Permet de modifier les variables selon le déclencheur
attention

Doc: Keyword reference for the .gitlab-ci.yml file | GitLab

![](./assets/images/p51_i522.png)

##==##

<!-- .slide:-->

# Gitlab CI / CD : Workflows

Permet de décider quand le pipeline est créé
Permet de modifier les variables selon le déclencheur

Doc: Keyword reference for the .gitlab-ci.yml file | GitLab

Duplication de pipelines

![](./assets/images/p52_i530.png)

##==##

<!-- .slide:-->

# GitLab CI / CD : auto devops

Utilisation de templates
Déploiement dans Kubernetes
Kubernetes piloté par Gitlab
Monitoring Automatique
1 namespace = 1 environment

Doc : Auto DevOps | GitLab

![](./assets/images/p53_i537.png)

##==##

<!-- .slide:-->

# GitLab CI / CD : auto devops

Utilisation de templates
Déploiement dans Kubernetes
Kubernetes piloté par Gitlab
Monitoring Automatique
1 namespace = 1 environment

Doc : Auto DevOps | GitLab

![](./assets/images/p54_i544.png)

##==##

<!-- .slide:-->

# GitLab CI / CD : auto devops

Utilisation de templates
Déploiement dans Kubernetes
Kubernetes piloté par Gitlab
Monitoring Automatique
1 namespace = 1 environment

Doc : Auto DevOps | GitLab

![](./assets/images/p55_i551.png)

![](./assets/images/p55_i552.png)

##==##

<!-- .slide:-->

# GitLab CI / CD : auto devops

Utilisation de templates
Déploiement dans Kubernetes
Kubernetes piloté par Gitlab
Monitoring Automatique
1 namespace = 1 environment

Doc : Auto DevOps | GitLab

![](./assets/images/p56_i560.png)

##==##

<!-- .slide:-->

# GitLab CI / CD : auto devops

Utilisation de templates
Déploiement dans Kubernetes
Kubernetes piloté par Gitlab
Monitoring Automatique
1 namespace = 1 environment

Doc : Auto DevOps | GitLab

![](./assets/images/p57_i567.png)

##==##

<!-- .slide:-->

# AutoDevOps

Notes:
Link to AutoDevOps templates :
https://gitlab.com/gitlab-org/gitlab/-/tree/master/lib/gitlab/ci/templates

Link to Root template :
https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/ci/templates/Auto-DevOps.gitlab-ci.yml

Show Deployment from master, do rollout and show environments.Kubernetes link limited. No performance cluster graphs (depreceated)Possibly replaced by Opstrace (based on prometheus)
